---
platform: linux

image_resource:
  type: docker-image
  source:
    repository: relintdockerhubpushbot/cf-deployment-concourse-tasks
    tag: v5.2.0

inputs:
- name: persi-ci
- name: diego-tarball
- name: nfs-tarball
- name: efs-tarball
- name: csi-local-tarball
- name: csi-plugins-tarball
- name: mapfs-tarball
- name: ecs-tarball
- name: cephfs-tarball
- name: local-tarball
- name: smb-tarball
- name: diego-version
- name: nfs-version
- name: efs-version
- name: csi-local-version
- name: csi-plugins-version
- name: mapfs-version
- name: ecs-version
- name: cephfs-version
- name: local-version
- name: smb-version

outputs:
- name: collected-tarballs

params:
  COLLECT_DIEGO_TARBALL: true
  COLLECT_NFS_TARBALL: true
  COLLECT_EFS_TARBALL: true
  COLLECT_CSI_LOCAL_TARBALL: true
  COLLECT_CSI_PLUGINS_TARBALL: true
  COLLECT_ECS_TARBALL: true
  COLLECT_LOCAL_TARBALL: true
  COLLECT_CEPHFS_TARBALL: true
  COLLECT_SMB_TARBALL: true
  COLLECT_MAPFS_TARBALL: true

run:
  path: persi-ci/scripts/ci/collect-tarballs
