---
platform: linux

image_resource:
  type: docker-image
  source:
    repository: relintdockerhubpushbot/cf-deployment-concourse-tasks
    tag: v5.2.0

inputs:
- name: persi-ci
- name: director-state

outputs:
- name: generated-vars

params:
  GENERATE_NFS_VARS: true
  GENERATE_EFS_VARS: true
  GENERATE_CEPHFS_VARS: true
  GENERATE_SMB_VARS: true
  GENERATE_ECS_BLOBSTORE_VARS: true
  GENERATE_DATADOG_VARS: true
  LDAP_HOST:
  LDAP_SVC_USER:
  LDAP_SVC_PASS:
  LDAP_PORT:
  LDAP_PROTO:
  LDAP_USER_FQDN:
  LDAP_TEST_SERVER_SSL_ACTIVE:
  LDAP_TEST_SERVER_CA_CERT:
  LDAP_TEST_SERVER_CERT:
  LDAP_TEST_SERVER_KEY:
  ECS_PASSWORD:
  ECS_USERNAME:
  ECS_IP:
  ECS_AWS_ID:
  ECS_AWS_KEY:
  APP_PACKAGE_DIRECTORY_KEY:
  BUILDPACK_DIRECTORY_KEY:
  DROPLET_DIRECTORY_KEY:
  RESOURCE_DIRECTORY_KEY:
  AWS_ACCESS_KEY_ID:
  AWS_SECRET_ACCESS_KEY:
  AWS_SECURITY_GROUP:
  AWS_SUBNET_ID:
  AWS_AZ:
  S3_BLOBSTORE_ID:
  S3_BLOBSTORE_KEY:
  S3_BLOBSTORE_REGION:
  EFS_BROKER_PASSWORD:
  DATADOG_API_KEY:
  DATADOG_METRIC_PREFIX:
  CEPHFS_KEYRING:
  BBL_IAAS: aws
  BBL_AWS_REGION:
  BBL_AWS_ACCESS_KEY_ID:
  BBL_AWS_SECRET_ACCESS_KEY:
  BBL_STATE_DIR: bbl-state
  BBL_IAAS: aws

run:
  path: persi-ci/scripts/ci/generate_variables
